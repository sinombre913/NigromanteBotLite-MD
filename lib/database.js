import{resolve,dirname as _0x5cd4b9}from'path';import _0x543de8,{existsSync,readFileSync}from'fs';const {promises:fs}=_0x543de8;class Database{constructor(_0x213c8b,..._0x594b8d){this['file']=resolve(_0x213c8b),this['logger']=console,this['_load'](),this['_jsonargs']=_0x594b8d,this['_state']=![],this['_queue']=[],this['_interval']=setInterval(async()=>{!this['_state']&&this['_queue']&&this['_queue'][0x0]&&(this['_state']=!![],await this[this['_queue']['shift']()]()['catch'](this['logger']['error']),this['_state']=![]);},0x3e8);}get['data'](){return this['_data'];}set['data'](_0x464a75){this['_data']=_0x464a75,this['save']();}['load'](){this['_queue']['push']('_load');}['save'](){this['_queue']['push']('_save');}['_load'](){try{return this['_data']=existsSync(this['file'])?JSON['parse'](readFileSync(this['file'])):{};}catch(_0x435aff){return this['logger']['error'](_0x435aff),this['_data']={};}}async['_save'](){const _0x5c0e0e=_0x5cd4b9(this['file']);if(!existsSync(_0x5c0e0e))await fs['mkdir'](_0x5c0e0e,{'recursive':!![]});return await fs['writeFile'](this['file'],JSON['stringify'](this['_data'],...this['_jsonargs'])),this['file'];}}export default Database;