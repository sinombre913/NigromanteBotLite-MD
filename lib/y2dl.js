import{stat}from'fs';import _0x1a298a from'node-fetch';const sleep=async _0x586e88=>new Promise(_0x429494=>setTimeout(_0x429494,_0x586e88)),bestFormat=(_0x254914,_0x3a67c9)=>new Promise(async(_0x975ef,_0x11599a)=>{const _0x3edbe4=await _0x1a298a('https://srvcdn8.2convert.me/api/json?url='+_0x254914,{'method':'GET','headers':{'origin':'https://en1.y2mate.is','referer':'https://en1.y2mate.is/','user-agent':'Mozilla/5.0\x20(Windows\x20NT\x2010.0;\x20Win64;\x20x64)\x20AppleWebKit/537.36\x20(KHTML,\x20like\x20Gecko)\x20Chrome/113.0.0.0\x20Safari/537.36\x20OPR/99.0.0.0'}}),_0x140ea1=await _0x3edbe4['json']();if(_0x140ea1['error']==!![])_0x11599a(![]);const _0x2f75e5=_0x140ea1['formats'];if(_0x3a67c9=='audio'){const _0x1a4069=_0x2f75e5['audio'];let _0x495ccd=_0x1a4069['find'](_0x486e6a=>_0x486e6a['quality']==0xc0);if(!_0x495ccd)_0x495ccd=_0x1a4069['find'](_0x5bf8cd=>_0x5bf8cd['quality']==0x80);if(!_0x495ccd)_0x495ccd=_0x1a4069['find'](_0x48d505=>_0x48d505['quality']==0x40);if(!_0x495ccd)_0x495ccd=_0x1a4069['find'](_0x252c83=>_0x252c83['quality']==0x30);if(!_0x495ccd)return _0x11599a(![]);return _0x975ef(_0x495ccd);}if(_0x3a67c9=='video'){if(_0x2f75e5['video']['length']==0x0)return _0x11599a(![]);const _0x23d8ca=_0x2f75e5['video'][_0x2f75e5['video']['length']-0x1];return _0x975ef(_0x23d8ca);}}),getUrlDl=_0x5c3fe3=>new Promise(async(_0x18cd0a,_0xbd0222)=>{const _0x5ae946=await _0x1a298a('https://srvcdn8.2convert.me/api/json',{'method':'POST','headers':{'content-type':'application/x-www-form-urlencoded;\x20charset=UTF-8','origin':'https://en1.y2mate.is','referer':'https://en1.y2mate.is/','user-agent':'Mozilla/5.0\x20(Windows\x20NT\x2010.0;\x20Win64;\x20x64)\x20AppleWebKit/537.36\x20(KHTML,\x20like\x20Gecko)\x20Chrome/113.0.0.0\x20Safari/537.36\x20OPR/99.0.0.0'},'body':'hash='+encodeURIComponent(_0x5c3fe3)}),_0x1d10bb=await _0x5ae946['json']();if(_0x1d10bb['error'])return _0xbd0222(![]);let _0x24d7e1=![];while(_0x24d7e1==![]){await sleep(0x3e8);const _0x518935=await _0x1a298a('https://srvcdn8.2convert.me/api/json/task',{'method':'POST','headers':{'content-type':'application/x-www-form-urlencoded;\x20charset=UTF-8','origin':'https://en1.y2mate.is','referer':'https://en1.y2mate.is/','user-agent':'Mozilla/5.0\x20(Windows\x20NT\x2010.0;\x20Win64;\x20x64)\x20AppleWebKit/537.36\x20(KHTML,\x20like\x20Gecko)\x20Chrome/113.0.0.0\x20Safari/537.36\x20OPR/99.0.0.0'},'body':'taskId='+_0x1d10bb['taskId']}),_0x3e3732=await _0x518935['json']();if(_0x3e3732['error'])return _0xbd0222(![]);if(_0x3e3732['status']=='finished'){_0x24d7e1=!![],_0x18cd0a(_0x3e3732);break;}if(_0x3e3732['status']=='error')return _0xbd0222(![]);}});export{bestFormat,getUrlDl};